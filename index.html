<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Materi Ramadhan</title>
    <style>
        body { font-family: -apple-system, sans-serif; background: #f0f4f2; padding: 20px; color: #333; }
        .card { background: white; border-radius: 15px; padding: 20px; margin-bottom: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .terkunci { opacity: 0.6; background: #e0e0e0; filter: grayscale(1); }
        video { width: 100%; border-radius: 10px; margin-top: 10px; }
        h1 { text-align: center; color: #2d5a27; }
        .badge { display: inline-block; padding: 5px 10px; border-radius: 5px; font-size: 12px; font-weight: bold; margin-bottom: 10px; }
        .badge-buka { background: #d4edda; color: #155724; }
        .badge-kunci { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <h1>ðŸŒ™ Materi Komunitas</h1>
    <div id="konten">Memuat materi...</div>

    <script>
        // GANTI LINK DI BAWAH INI DENGAN URL DARI APPS SCRIPT KAMU
        const scriptURL = "https://script.google.com/macros/s/AKfycbxIpHPzztxb9KlD4qZUz3FL4UmvqwHkpp6e-HCXnJKLbSiDwzr2PHOWA0GGRCzDxh_o/exec";

        async function ambilData() {
            try {
                const res = await fetch(scriptURL);
                const data = await res.json();
                const container = document.getElementById('konten');
                container.innerHTML = '';
                const sekarang = new Date();

                data.forEach(item => {
                    const tglBuka = new Date(item.buka);
                    const isBuka = sekarang >= tglBuka && item.video !== "";
                    
                    const card = document.createElement('div');
                    card.className = `card ${isBuka ? '' : 'terkunci'}`;
                    
                    card.innerHTML = `
                        <span class="badge ${isBuka ? 'badge-buka' : 'badge-kunci'}">${isBuka ? 'ðŸ”“ TERBUKA' : 'ðŸ”’ TERKUNCI'}</span>
                        <h3>${item.judul}</h3>
                        ${isBuka ? 
                            `<video controls><source src="${item.video}" type="video/mp4"></video>` : 
                            `<p>Materi akan otomatis terbuka pada:<br><b>${tglBuka.toLocaleString('id-ID')}</b></p>`
                        }
                    `;
                    container.appendChild(card);
                });
            } catch (e) {
                document.getElementById('konten').innerHTML = "Cek URL Apps Script kamu, sepertinya ada yang salah.";
            }
        }
        ambilData();
    </script>
</body>
</html>
